{% extends "base.html" %}
{% load custom_filters %}
{% load static %}

{% block title %}Events{% endblock %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/events.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/evening-card.css' %}">
{% endblock %}

{% block content %}
<!-- <div class="search-container">
    <form method="get" action="{% url 'search' %}">
        <input type="text" name="query" placeholder="Hledat..." value="{{ request.GET.query }}">
        <button type="submit">Hledat</button>
    </form>
</div> -->
<div class="filter text-container">
    <form method="get" action="{% url 'events' %}">
        <button type="submit" name="filter" value="ALL" class="button {% if selected_filter == 'ALL' %}active{% endif %}">Všechny</button>
        <button type="submit" name="filter" value="WORKSHOP" class="button {% if selected_filter == 'WORKSHOP' %}active{% endif %}">Vícedenní tance</button>
        <button type="submit" name="filter" value="EVENT" class="button {% if selected_filter == 'EVENT' %}active{% endif %}">Taneční večery</button>
    </form>
</div>
<!-- <div class="archiv">
    <form method="get" action="{% url 'past_events' %}">
        <button type="submit" class="archiv-button">Archiv událostí</button>
    </form>
</div> -->
<div class="events-grid text-container">
    {% for event in combined|filter_past_events %}
    {% if event|is_instance:'Event' %}
    {% include "evening_card.html" with event=event %}
    {% else %}
    <!-- a link workshopu -->
    <div class="workshop-card event-card">
        <div class="event-card-inner">
            <div class="event-title">{{ event.title }}</div>
            <div class="event-date">
                {% with event|date_format as date %}
                {{ date.day }} {{ date.date }}
                {% endwith %}
            </div>
            <!--<div class="workshop-card-content">-->
            <div class="workshop-content event-content">
                {% if event.image %}
                <img class="workshop-image" src="{{ event.image.url }}" alt="{{ event.title }}">
                {% endif %}
                <div class="workshop-address"><div class="workshop-address-town">{{ event.location.town }}</div>{{ event.location.address }} </div>
                <div class="workshop-time">8:00-18:00</div>
                <div class="workshop-description">
                    {{ event.description }} 
                </div>
                <div class="workshop-lectors">
                    {% for lector in event.lector.all %}
                    <a class="event-lector" href="{% url 'lector_page' slug=lector.slug %}">
                        <img class="event-lector-image" src="{{ lector.image.url }}" alt="lector" />
                        <div class="event-lector-name">{{ lector.firstName }}{% if lector.lastName %} {{ lector.lastName }}{% endif %}{% if not forloop.last %}, {% endif %}</div>
                    </a>
                    {% endfor %}
                </div>
            </div>
            <!--</div>-->
        </div>
    </div>
    {% endif %}
    {% endfor %}
</div>
{% endblock %}
